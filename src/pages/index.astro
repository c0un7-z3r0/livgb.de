---
import MosaicContainer from "../components/MosaicContainer.astro";

import Layout from "../layouts/Layout.astro";
import client from "../graphql/apollo-client";
import {
  GetFrontpage,
  type GetFrontpageQuery,
} from "../graphql/__generated__/operations";
import { logger } from "../lib/logger";

const { data } = await client.query<GetFrontpageQuery>({
  fetchPolicy: "no-cache",
  query: GetFrontpage,
});

const images = data.frontpage.data.attributes.Gallery.Images;
logger.info("Frontpage loaded", { images: images.length });
---

<Layout>
  <MosaicContainer images={images} />
</Layout>
