---
import Layout from "../layouts/Layout.astro";
import client from "../graphql/apollo-client";
import {
  GetFrontpage,
  type GetFrontpageQuery,
} from "../graphql/__generated__/operations";
import PhotoSwipeGallery from "../components/PhotoSwipeGallery.astro";
import { logger } from "../lib/logger.ts";

const { data } = await client.query<GetFrontpageQuery>({
  fetchPolicy: "no-cache",
  query: GetFrontpage,
});

const images = data.frontpage.data.attributes.Gallery.Images;
logger.info("Frontpage images", {
  images: images.map((i) => i.File.data.attributes.url),
});
---

<Layout>
  <PhotoSwipeGallery images={images} />
</Layout>
