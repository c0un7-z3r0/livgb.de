---
import Layout from "../layouts/Layout.astro";
import client from "../graphql/apollo-client.ts";
import {
  GetFrontpage,
  type GetFrontpageQuery,
} from "../graphql/__generated__/operations.ts";
import { logger } from "../lib/logger.ts";
import PhotoSwipeGallery from "../components/PhotoSwipeGallery.astro";

const { data } = await client.query<GetFrontpageQuery>({
  fetchPolicy: "no-cache",
  query: GetFrontpage,
});

const images = data.frontpage.data.attributes.Gallery.Images;

logger.info("Frontpage images", {
  images: images.map((i) => i.File.data.attributes.url),
});
---

<Layout>
  <PhotoSwipeGallery images={images} />
</Layout>
